---
aliases: []
---
The **difference between IS-IS narrow metrics and wide metrics** lies in their **size, scalability, and flexibility**. These metrics are used to calculate the cost of paths in the IS-IS routing domain.

---

### üîπ 1. **Narrow Metrics (Old-Style Metrics)**

#### ‚úÖ Characteristics:

- **6-bit metric field** (in the default TLV)
    
- Maximum value: **63**
    
- Assigned **per interface**
    
- Originally designed for smaller, less complex networks
    

#### üìâ Limitations:

- Limited to low-cost ranges, which can‚Äôt accurately represent modern high-speed links
    
- Doesn't support **MPLS Traffic Engineering (TE)**, **IPv6**, or **multi-topology** extensions
    

---

### üîπ 2. **Wide Metrics (New-Style Metrics)**

#### ‚úÖ Characteristics:

- **24-bit metric field** (in extended TLVs)
    
- Maximum value: **16,777,215**
    
- Allows more granular and scalable cost assignments
    
- Used in modern TLVs like:
    
    - TLV 135 (Extended IS Reachability)
        
    - TLV 138 (Extended IP Reachability)
        

#### üìà Advantages:

- Supports:
    
    - **IPv6**
        
    - **Traffic Engineering (TE)**
        
    - **Segment Routing (SR)**
        
    - **Multi-Topology IS-IS**
        
- Allows better traffic control and link differentiation in large networks
    

---

### üÜö Summary Table

|Feature|Narrow Metrics|Wide Metrics|
|---|---|---|
|Metric Size|6 bits (max 63)|24 bits (max 16M+)|
|Config Flexibility|Limited|Highly flexible|
|IPv6/TE Support|‚ùå Not supported|‚úÖ Fully supported|
|Use in Modern Networks|‚ùå Not recommended|‚úÖ Standard practice|
|TLVs Used|TLV 22, 128, 130|TLV 135, 138, etc.|

---

### üõ†Ô∏è Migration Note:

When transitioning from narrow to wide metrics:

- Ensure all routers support wide metrics.
    
- Use **metric-style wide** in configuration.
    
- Backward compatibility must be managed carefully to avoid routing issues.
    

---

Would you like an example configuration showing how to enable wide metrics on a Cisco or Juniper router?

---
---
---
---
In the IS-IS (Intermediate System to Intermediate System) protocol, **narrow metrics** and **wide metrics** refer to different formats for representing the cost (or metric) of links in Link State Packets (LSPs), which are used to build the Link State Database (LSDB) and compute shortest paths. The distinction lies in the size of the metric field, their scalability, and their application in modern networks, particularly for Traffic Engineering (TE) and advanced routing features. Below is a detailed comparison of IS-IS narrow metrics and wide metrics:

### 1. **Definition**
- **Narrow Metrics**:
  - The original metric format defined in the IS-IS standard (ISO 10589).
  - Uses a **6-bit field** (values 0‚Äì63) to represent the cost of a link in LSPs.
  - Found in TLV (Type-Length-Value) types such as TLV 2 (IS Neighbors) and TLV 22 (Extended IS Reachability) for default metrics.
- **Wide Metrics**:
  - An extended metric format introduced to overcome the limitations of narrow metrics.
  - Uses a **24-bit field** (values 0‚Äì16,777,215) to represent the cost of a link.
  - Defined in TLV 22 (Extended IS Reachability) and TLV 135 (Extended IP Reachability) for more granular and scalable metrics.

### 2. **Key Differences**

| Feature                  | Narrow Metrics                       | Wide Metrics                         |
|--------------------------|--------------------------------------|--------------------------------------|
| **Metric Size**          | 6 bits (0‚Äì63)                       | 24 bits (0‚Äì16,777,215)              |
| **TLV Used**             | TLV 2 (IS Neighbors), TLV 128/130   | TLV 22 (Extended IS Reachability), TLV 135 (Extended IP Reachability) |
| **Scalability**          | Limited due to small metric range    | Highly scalable with larger metric range |
| **Granularity**          | Coarse (limited to 63)              | Fine-grained (supports millions of values) |
| **Traffic Engineering**  | Not supported                       | Supported (e.g., MPLS TE, Segment Routing) |
| **Maximum Path Cost**    | 1023 (sum of metrics, 6 bits √ó hops)| Much higher (due to 24-bit metrics)  |
| **Compatibility**        | Supported by all IS-IS implementations | Requires support for RFC 5305 extensions |
| **Default Behavior**     | Default in older IS-IS deployments   | Default in modern implementations (configurable) |

### 3. **Detailed Comparison**

#### a. **Metric Size and Range**
- **Narrow Metrics**:
  - Limited to a 6-bit field, allowing a maximum link cost of 63.
  - The total path cost (sum of link metrics) is capped at 1023 (10 bits in the IS-IS SPF calculation), restricting the protocol‚Äôs ability to represent large or complex networks.
  - Example: A link metric might be set to 10, but values above 63 are not possible, reducing flexibility.
- **Wide Metrics**:
  - Uses a 24-bit field, allowing link costs up to 16,777,215.
  - Supports much larger total path costs, making it suitable for large-scale networks with diverse link types (e.g., high-bandwidth fiber vs. low-bandwidth satellite links).
  - Example: A link metric can be set to 100,000 to reflect a high-cost path, providing fine-grained control.

#### b. **TLV Usage**
- **Narrow Metrics**:
  - Carried in older TLVs:
    - **TLV 2 (IS Neighbors)**: For IS-IS neighbor adjacency metrics.
    - **TLV 4 (IP Interface Address)**: For IP reachability (less common).
    - **TLV 128/130**: For internal/external IP reachability with narrow metrics.
  - These TLVs are backward-compatible with all IS-IS implementations but lack extensibility.
- **Wide Metrics**:
  - Carried in newer TLVs defined in RFC 5305 (IS-IS Extensions for TE):
    - **TLV 22 (Extended IS Reachability)**: Replaces TLV 2, supporting 24-bit metrics for neighbors and additional TE attributes.
    - **TLV 135 (Extended IP Reachability)**: Replaces TLV 128/130, supporting 24-bit metrics for IP prefixes.
  - These TLVs are more flexible and support modern features like TE and Segment Routing.

#### c. **Scalability and Granularity**
- **Narrow Metrics**:
  - The limited range (0‚Äì63) restricts the ability to differentiate between links with varying costs, especially in large networks with diverse link speeds (e.g., 10 Mbps to 100 Gbps).
  - Example: In a network with 100 Gbps and 1 Gbps links, both might be assigned similar metrics (e.g., 10 vs. 11), reducing path optimization accuracy.
  - Path costs exceeding 1023 can lead to suboptimal routing or SPF calculation issues.
- **Wide Metrics**:
  - The 24-bit range allows precise metric assignments, enabling better path selection in large, heterogeneous networks.
  - Example: A 100 Gbps link can be assigned a metric of 10, while a 1 Gbps link gets 1000, accurately reflecting their relative costs.
  - Supports networks with thousands of routers and complex topologies without metric exhaustion.

#### d. **Support for Traffic Engineering**
- **Narrow Metrics**:
  - Do not support Traffic Engineering (TE) because the 6-bit field cannot carry additional TE attributes (e.g., bandwidth, delay, or administrative groups).
  - Unsuitable for MPLS TE or Segment Routing, which require detailed link information.
- **Wide Metrics**:
  - Designed for TE, with TLV 22 and TLV 135 supporting sub-TLVs for TE attributes like:
    - Maximum link bandwidth.
    - Reservable bandwidth.
    - Administrative groups (color).
    - TE metric (separate from the default metric).
  - Enables advanced features like MPLS TE, Segment Routing, and Flex-Algo, critical for service provider and data center networks.

#### e. **Compatibility**
- **Narrow Metrics**:
  - Universally supported by all IS-IS implementations, including older devices and software.
  - Default in legacy IS-IS deployments, ensuring backward compatibility.
  - Routers using narrow metrics can interoperate with those using wide metrics, but wide metric information is ignored.
- **Wide Metrics**:
  - Require support for RFC 5305 (IS-IS Extensions for TE), which is common in modern routers (e.g., Cisco, Juniper, Nokia) but may not be available in very old devices.
  - Routers can be configured to use both narrow and wide metrics (dual mode) during a transition to ensure compatibility.
  - Example: A router advertises both TLV 2 (narrow) and TLV 22 (wide) to support mixed environments.

#### f. **Default Behavior**
- **Narrow Metrics**:
  - Historically the default in IS-IS implementations, especially in older networks or devices.
  - Still used in environments where simplicity and compatibility with legacy systems are prioritized.
- **Wide Metrics**:
  - Modern IS-IS implementations (post-RFC 5305) often default to wide metrics or allow configuration to prefer wide metrics.
  - Configurable via commands like `metric-style wide` (Cisco) or equivalent in other vendors.

### 4. **Practical Implications**
- **Narrow Metrics Limitations**:
  - In large-scale networks, the 6-bit limit can force coarse metric assignments, leading to suboptimal routing (e.g., inability to distinguish between a 10 Gbps and 40 Gbps link).
  - Lack of TE support restricts their use in modern service provider or data center networks.
  - Maximum path cost of 1023 can be insufficient in networks with many hops or high-cost links.
- **Wide Metrics Advantages**:
  - Enable precise path selection in diverse networks, improving traffic optimization.
  - Support TE and advanced features like Segment Routing, making them ideal for MPLS, 5G, or cloud environments.
  - Allow for future-proofing as networks grow in size and complexity.
- **Transitioning from Narrow to Wide Metrics**:
  - Networks can transition by configuring routers to advertise both metric types (e.g., `metric-style transition` in Cisco).
  - Routers using wide metrics can interoperate with narrow metric routers, but narrow metric routers ignore wide metric TLVs, potentially leading to inconsistent path calculations.
  - Best practice: Gradually enable wide metrics across all routers to ensure consistency, then disable narrow metrics.

### 5. **Configuration Examples**
- **Cisco (Narrow Metrics)**:
  ```bash
  router isis
   metric-style narrow
   interface GigabitEthernet0/0
    isis metric 10
  ```
  - Uses TLV 2 or 128/130 with a metric value of 0‚Äì63.
- **Cisco (Wide Metrics)**:
  ```bash
  router isis
   metric-style wide
   interface GigabitEthernet0/0
    isis metric 1000
  ```
  - Uses TLV 22 or 135 with a metric value up to 16,777,215.
- **Transition Mode**:
  ```bash
  router isis
   metric-style transition
  ```
  - Advertises both narrow and wide metrics for compatibility during migration.

### 6. **Use Cases**
- **Narrow Metrics**:
  - Suitable for small or legacy networks with simple topologies and no TE requirements.
  - Common in older enterprise networks or environments with outdated hardware.
- **Wide Metrics**:
  - Preferred in large-scale service provider backbones, data centers, or enterprise networks requiring:
    - Fine-grained path control.
    - Support for MPLS TE, Segment Routing, or Flex-Algo.
    - Scalability for thousands of routers or diverse link types.
  - Example: A Tier-1 ISP uses wide metrics to assign costs based on link bandwidth (e.g., 10 for 100 Gbps, 100 for 10 Gbps) and support TE for low-latency paths.

### 7. **Conclusion**
The primary difference between IS-IS narrow metrics and wide metrics is the size of the metric field (6 bits vs. 24 bits), which impacts scalability, granularity, and feature support. Narrow metrics, with their limited range (0‚Äì63), are suitable for small, legacy networks but lack the flexibility for modern requirements like Traffic Engineering. Wide metrics, with their 24-bit range, offer fine-grained control, scalability, and support for advanced features like MPLS TE and Segment Routing, making them the standard for large-scale networks. Transitioning to wide metrics is recommended for modern deployments, with careful planning to ensure compatibility in mixed environments.

If you need further details, such as specific TLV formats, configuration steps for a vendor, or guidance on transitioning to wide metrics, let me know!