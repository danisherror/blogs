---
aliases: []
---
IS-IS (Intermediate System to Intermediate System) was originally developed as part of the **OSI (Open Systems Interconnection)** protocol suite, and it leverages the **CLNS (Connectionless Network Service)** framework for its operation. Hereâ€™s a detailed explanation:

---

## ðŸ§© What is CLNS?

**CLNS (Connectionless Network Service)** is the OSI equivalent of the IP layer in the TCP/IP model. It provides **datagram-based network-layer service** without the need for a connection to be established, similar to how IP works in TCP/IP.

---

## ðŸ”— How IS-IS Uses CLNS

### 1. **Protocol Foundation**

- IS-IS was designed to **run directly over the OSI network layer**, specifically over CLNS, **not over IP** like OSPF.
    
- It uses **NSAP (Network Service Access Point) addresses**, part of the CLNS addressing scheme.
    

### 2. **No Need for IP for Control Traffic**

- IS-IS control messages (Hellos, LSPs, SNPs) are **encapsulated in CLNS packets**, not IP.
    
- This means IS-IS works independently of IP â€” allowing it to route **both IP and non-IP protocols** (like CLNP or MPLS extensions).
    

### 3. **CLNS Addressing via NET**

- IS-IS routers are identified by a **NET (Network Entity Title)**, which is a type of **NSAP address** â€” central to CLNS.
    
- The NET provides:
    
    - **Area ID** (to determine area membership)
        
    - **System ID** (to identify the router)
        
    - **NSEL = 00** (routing entity)
        

### 4. **Interface Level Operation**

- Since IS-IS doesn't rely on IP, it can operate on interfaces that **don't have IP addresses**.
    
- This is particularly useful in **MPLS transport** and **fast convergence** scenarios.
    

---

## ðŸ“œ Summary of CLNS Role in IS-IS

|Feature|Description|
|---|---|
|**Transport Layer**|CLNS (not IP)|
|**Address Format**|NET (derived from NSAP)|
|**Encapsulation**|IS-IS packets are encapsulated in CLNS packets|
|**Routing Control Independence**|IS-IS can run even if IP is not configured on interfaces|
|**Protocol Origin**|Native to OSI model but extended for IP (Integrated IS-IS)|

---

## âœ… Key Benefits of CLNS Usage

- **Protocol independence** from IP
    
- Allows **routing of multiple protocols** (IP, IPv6, CLNP, etc.)
    
- Useful in **non-IP environments** or **service provider networks**
    
- Works well in **multi-protocol and MPLS-based networks**
    

---

Would you like a Wireshark packet capture or diagram showing how IS-IS looks in CLNS frames?



---
---
---
---
The IS-IS (Intermediate System to Intermediate System) protocol operates within the **Connectionless Network Service (CLNS)** framework, a part of the OSI (Open Systems Interconnection) model defined by the International Organization for Standardization (ISO). Unlike IP-based protocols like OSPF, IS-IS was originally designed to route OSIâ€™s Connectionless Network Protocol (CLNP) but has been adapted to support IP (IPv4 and IPv6) and other protocols. The CLNS framework provides a protocol-independent, connectionless data delivery mechanism that IS-IS leverages for its routing operations. Below is a detailed explanation of how IS-IS uses the CLNS framework:

### 1. **Overview of CLNS**
- **Definition**: CLNS is a network-layer service in the OSI model that provides connectionless, best-effort delivery of data packets, similar to IP. It uses CLNP (ISO 8473) as its primary protocol for data transport.
- **Key Features**:
  - **Connectionless**: No prior setup or connection establishment is required before sending data.
  - **Addressing**: Uses Network Service Access Points (NSAPs) or Network Entity Titles (NETs) for identifying devices and network entities.
  - **Protocol Independence**: Supports various network-layer protocols, not tied to a specific addressing scheme like IP.
- **Role in IS-IS**: CLNS provides the addressing and packet delivery infrastructure for IS-IS control messages, even when IS-IS is used to route IP traffic.

### 2. **How IS-IS Uses CLNS**
IS-IS leverages the CLNS framework for its control plane operations, including router identification, adjacency formation, topology exchange, and routing calculations. Hereâ€™s how:

#### a. **Addressing with NETs**
- **NET as NSAP Subset**: IS-IS uses the Network Entity Title (NET), a simplified form of the OSI NSAP address, to identify routers (Intermediate Systems). The NET includes:
  - **Area ID**: Defines the IS-IS area for hierarchical routing.
  - **System ID**: Uniquely identifies the router within the IS-IS domain.
  - **Selector (SEL)**: Set to `00` to indicate a network entity (router).
- **Role in CLNS**: The NET is a CLNS address that allows IS-IS to operate independently of IP. Routers use NETs in all IS-IS control packets (e.g., Hellos, LSPs) to identify themselves and their neighbors.
- **Significance**: By using CLNS addressing, IS-IS can route non-IP protocols like CLNP or support IP protocols (IPv4/IPv6) via TLV (Type-Length-Value) extensions, making it highly flexible.

#### b. **Control Packet Delivery**
- **IS-IS Packet Encapsulation**: IS-IS control packets (e.g., Hello packets, Link State Packets (LSPs), Complete Sequence Number PDUs (CSNPs), and Partial Sequence Number PDUs (PSNPs)) are encapsulated directly over the data link layer (Layer 2) using CLNS protocols, not IP.
  - On Ethernet, IS-IS packets use specific multicast MAC addresses (e.g., `0180.c200.0014` for Level 1, `0180.c200.0015` for Level 2) or unicast MAC addresses for point-to-point links.
  - The packets carry CLNS headers with source and destination NETs, ensuring delivery to the correct IS-IS router.
- **CLNS Transport**: CLNS provides the mechanism to transport these control packets between routers without requiring an IP stack, allowing IS-IS to function in non-IP environments or alongside IP routing.
- **Advantage**: This direct Layer 2 encapsulation reduces dependency on IP, making IS-IS more resilient to IP-related issues (e.g., IP address misconfigurations) and enabling operation in mixed-protocol networks.

#### c. **Adjacency Formation**
- **Hello Packets**: IS-IS uses CLNS to send Hello packets (IIHs, or IS-IS Hellos) to discover and maintain adjacencies with neighboring routers.
  - Hello packets include the source routerâ€™s NET, allowing neighbors to verify area compatibility (same Area ID for Level 1) and establish adjacencies.
  - The CLNS framework ensures these packets are delivered to adjacent routers on the same link, using Layer 2 addressing.
- **DIS Election**: On broadcast networks, IS-IS elects a Designated Intermediate System (DIS) using Hello packets. The CLNS-based NETâ€™s System ID is used to determine the DIS (highest System ID wins if priorities are equal).
- **Role of CLNS**: CLNS provides the addressing and delivery mechanism for Hellos, ensuring reliable neighbor discovery without relying on IP.

#### d. **Link State Database (LSDB) and Flooding**
- **LSPs in CLNS**: IS-IS routers generate Link State Packets (LSPs) to advertise their topology information (neighbors, connected networks, and metrics). These LSPs are identified by the routerâ€™s System ID within the NET and are flooded throughout the area (Level 1) or backbone (Level 2).
  - LSPs are encapsulated in CLNS packets, allowing them to be transmitted across the network without IP involvement.
- **CSNPs and PSNPs**: Complete Sequence Number PDUs (CSNPs) and Partial Sequence Number PDUs (PSNPs) are used to synchronize and acknowledge LSPs in the LSDB. These packets also use CLNS for delivery, relying on NETs to identify the sender and recipient.
- **CLNS Role**: The CLNS framework ensures reliable flooding and synchronization of topology information, enabling IS-IS to build a consistent LSDB across routers.

#### e. **Routing Calculations**
- **SPF Algorithm**: IS-IS uses the Shortest Path First (SPF) algorithm to compute the best paths based on the LSDB. While the LSDB contains topology information derived from CLNS-based LSPs, the actual routes computed can be for IP prefixes, CLNP destinations, or other protocols.
- **CLNS Contribution**: The CLNS framework provides the NET-based topology data (via LSPs) that feeds into the SPF calculation, ensuring accurate path computation regardless of the routed protocol.
- **Flexibility**: By using CLNS, IS-IS can compute paths for multiple protocols (e.g., IPv4, IPv6, MPLS) within the same LSDB, leveraging TLVs to carry protocol-specific information.

#### f. **Multi-Protocol Support**
- **TLV Extensions**: IS-IS uses TLV fields in its packets (Hellos, LSPs) to carry additional information, such as IP prefixes, IPv6 addresses, or MPLS labels. These TLVs are part of the CLNS packet structure, allowing IS-IS to extend its functionality beyond CLNP.
- **CLNS Advantage**: The CLNS frameworkâ€™s protocol-agnostic nature enables IS-IS to support multiple address families (e.g., IPv4, IPv6) in a single instance, unlike OSPF, which requires separate instances (OSPFv2 for IPv4, OSPFv3 for IPv6).
- **Example**: An IS-IS router can advertise IPv4 prefixes using TLV 128 or 135 and IPv6 prefixes using TLV 236, all within CLNS-encapsulated LSPs.

### 3. **Key Benefits of Using CLNS in IS-IS**
- **Protocol Independence**: CLNS allows IS-IS to operate without reliance on IP, making it versatile for routing CLNP, IP, or other protocols in diverse environments.
- **Resilience**: By running directly over Layer 2, IS-IS avoids IP-related vulnerabilities (e.g., IP spoofing) and can function even if IP connectivity is disrupted.
- **Scalability**: The CLNS-based NET structure supports hierarchical routing (Level 1 and Level 2), enabling IS-IS to scale efficiently in large networks.
- **Extensibility**: The TLV-based packet structure within CLNS makes IS-IS highly extensible, supporting new features like Traffic Engineering (TE), Segment Routing (SR), and IPv6 without protocol redesign.
- **Interoperability**: The standardized CLNS framework ensures consistent IS-IS operation across vendors (Cisco, Juniper, Nokia), critical for multi-vendor networks.

### 4. **Practical Considerations**
- **Configuration**: Each IS-IS router requires a manually configured NET, which is used in all CLNS-based control packets. Incorrect NET configuration (e.g., duplicate System IDs) can disrupt routing.
- **IP Routing with CLNS**: When IS-IS is used for IP routing, the CLNS framework handles control plane operations (e.g., Hellos, LSPs), while IP prefixes are carried in TLVs. No CLNP data traffic is required for IP routing.
- **Troubleshooting**: Tools like packet captures (e.g., Wireshark) can analyze CLNS-encapsulated IS-IS packets to diagnose issues like adjacency failures or LSP flooding problems.
- **Legacy Support**: While CLNS was designed for CLNP, its use in IS-IS ensures compatibility with modern IP networks, making IS-IS a future-proof protocol.

### 5. **Comparison with IP-Based Protocols**
- **OSPF**: OSPF operates directly over IP, using IP addresses for router identification and packet delivery. This ties OSPF to IP networks, requiring separate instances for IPv4 and IPv6.
- **IS-IS with CLNS**: By using CLNS, IS-IS is decoupled from IP, allowing a single instance to support multiple protocols and reducing dependency on IP configuration.
- **Advantage**: IS-ISâ€™s CLNS-based operation makes it more flexible and resilient, especially in service provider networks or environments with mixed protocols.

### 6. **Example in Operation**
- **Scenario**: Two routers, R1 (NET: `49.0001.1921.6800.1001.00`) and R2 (NET: `49.0001.1921.6800.1002.00`), form a Level 1 adjacency on an Ethernet link.
- **CLNS Role**:
  - R1 sends a Level 1 Hello packet encapsulated in a CLNS frame to the multicast MAC address `0180.c200.0014`, including its NET.
  - R2 verifies the matching Area ID (`49.0001`) and forms the adjacency.
  - Both routers exchange LSPs with their System IDs (`1921.6800.1001` and `1921.6800.1002`) to build the Level 1 LSDB, advertising IP prefixes via TLVs.
  - CLNS ensures the reliable delivery of these control packets without IP involvement.

### Conclusion
IS-IS uses the CLNS framework to provide a protocol-independent, connectionless infrastructure for its control plane operations. CLNS enables NET-based addressing, direct Layer 2 packet delivery, adjacency formation, LSDB synchronization, and multi-protocol routing via TLVs. This design makes IS-IS highly scalable, resilient, and extensible, ideal for large-scale networks like service provider backbones or data centers. By leveraging CLNS, IS-IS achieves flexibility and interoperability, distinguishing it from IP-dependent protocols like OSPF.

If you need further details, such as packet formats, configuration examples for CLNS in IS-IS, or troubleshooting CLNS-related issues, let me know!